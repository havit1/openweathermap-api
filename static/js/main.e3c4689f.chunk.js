(window["webpackJsonpopenweathermap-api"]=window["webpackJsonpopenweathermap-api"]||[]).push([[0],{28:function(e,t,n){e.exports=n(60)},33:function(e,t,n){},57:function(e,t,n){},58:function(e,t,n){},59:function(e,t,n){},60:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(12),i=n.n(r),c=(n(33),n(3)),s=n.n(c),l=n(4),u=n(14),d=n(5),h=n(6),m=n(9),p=n(7),f=n(10),g=n(8),y=n(15),v=(n(56),n(57),function(e){function t(){var e,n;Object(d.a)(this,t);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(n=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(o)))).state={searchedLine:"",searchedCityWeather:{}},n.onSearchChange=function(e){n.setState({searchedLine:e.target.value})},n.onHandleSearch=function(e){e.preventDefault();var t=n.state.searchedLine.length>0?n.state.searchedLine:null;n.props.closeDetailedInfo(),n.getSearchedWeatherInfo(t)},n.getSearchedWeatherInfo=function(){var e=Object(l.a)(s.a.mark((function e(t){var a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==t){e.next=5;break}return n.props.getSearchedCityWeather(null),e.abrupt("return");case 5:if(null!==t){e.next=7;break}return e.abrupt("return",null);case 7:return console.log(t),e.next=10,g.a.get("https://api.openweathermap.org/data/2.5/weather?q=".concat(t,"&units=metric&APPID=97ea200bf11177ab3c207304b3be2608"));case 10:a=e.sent,n.props.getSearchedCityWeather(a.data);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n}return Object(f.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this.onSearchChange,t=this.onHandleSearch;return o.a.createElement("form",{className:"search-bar"},o.a.createElement("input",{className:"search-bar__input",type:"text",onChange:e}),o.a.createElement("button",{className:"search-bar__btn",onClick:t},"Find"))}}]),t}(a.Component)),w=(n(58),function(e){function t(){var e;return Object(d.a)(this,t),(e=Object(m.a)(this,Object(p.a)(t).call(this))).getDayName=function(e){e.split(" ").join("T");return["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][new Date(e).getDay()]},e.getWeatherForFutureDays=function(t){for(var n=[],a=Object(u.a)(t),o=0;o<a.length;o++){var r=a.filter((function(e){return new Date(a[0].dt_txt.split(" ").join("T")).getDay()===new Date(e.dt_txt.split(" ").join("T")).getDay()}));n.push(r),a.splice(a.indexOf(r[0]),a.indexOf(r[r.length-1])+1)}return n.splice(0,1),e.getMinMaxTemp(n)},e.getMinMaxTemp=function(e){var t=[];return e.map((function(e){var n=e[0].main.temp_max,a=e[0].main.temp_min,o=e[0].dt_txt,r=e[0].weather[0].icon;e.map((function(e){e.main.temp_max>n&&(n=Math.round(e.main.temp_max)),e.main.temp_min<a&&(a=Math.round(e.main.temp_min))})),t.push({minTemp:a,maxTemp:n,date:o,icon:r})})),t},e.state={cityInfo:[]},e}return Object(f.a)(t,e),Object(h.a)(t,[{key:"getUserWeather",value:function(){var e=this;navigator.geolocation.getCurrentPosition(function(){var t=Object(l.a)(s.a.mark((function t(n){var a;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getWeather(n.coords.latitude,n.coords.longitude);case 2:a=t.sent,e.setState({cityInfo:a});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),(function(e){return console.warn("ERROR(".concat(e.code,"): ").concat(e.message))}),{enableHighAccuracy:!0,timeout:5e3,maximumAge:0})}},{key:"getWeather",value:function(e,t){return g.a.get("https://api.openweathermap.org/data/2.5/forecast?lat=".concat(e,"&lon=").concat(t,"&units=metric&APPID=97ea200bf11177ab3c207304b3be2608"))}},{key:"componentDidMount",value:function(){this.props.weatherInfo||this.getUserWeather()}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"user-info"},0===this.state.cityInfo.length?o.a.createElement("div",{className:"lds-ripple"},o.a.createElement("div",null),o.a.createElement("div",null)):o.a.createElement("div",{className:"user-info__wrapper"},o.a.createElement("div",{className:"user-info__today"},o.a.createElement("h3",{className:"user-info__today-header"},this.getDayName(this.state.cityInfo.data.list[0].dt_txt)),o.a.createElement("h4",null,this.state.cityInfo.data.city.name,","," ",this.state.cityInfo.data.city.country),o.a.createElement("div",{className:"user-info__today-temp-icon"},o.a.createElement("h1",null,Math.round(this.state.cityInfo.data.list[0].main.temp),"\xb0C"),o.a.createElement("img",{alt:"/",src:"http://openweathermap.org/img/wn/".concat(this.state.cityInfo.data.list[0].weather[0].icon,"@2x.png")})),o.a.createElement("div",{className:"user-info__today-additional"},o.a.createElement("span",null,"Humidity: ",this.state.cityInfo.data.list[0].main.humidity),o.a.createElement("span",null,"Wind: ",this.state.cityInfo.data.list[0].wind.speed))),o.a.createElement("div",{className:"user-info__nextdays"},this.getWeatherForFutureDays(this.state.cityInfo.data.list).map((function(t){return o.a.createElement("div",{className:"user-info__nextdays-nextday",key:t.date},o.a.createElement("h3",{className:"user-info__nextdays-nextday-header"},e.getDayName(t.date)),o.a.createElement("img",{alt:"/",src:"http://openweathermap.org/img/wn/".concat(t.icon,"@2x.png")}),o.a.createElement("div",{className:"user-info__nextdays-nextday-temperature"},o.a.createElement("div",null,t.maxTemp,"\xb0C"),o.a.createElement("div",null,t.minTemp,"\xb0")))})))))}}]),t}(a.Component)),b=(n(59),o.a.lazy((function(){return n.e(3).then(n.bind(null,69))}))),E=o.a.lazy((function(){return Promise.all([n.e(4),n.e(5)]).then(n.bind(null,68))})),C=function(e){var t=e.onMainBtnClick,n=e.closeDetailedInfo,a=e._onButtonClick,r=e.changeButtonColor,i=e.handleLike,c=e.showComponent,s=e.showPage,l=e.data,u=e.showUserLocationWindow,d=e.onCloseUserLocationWindow,h=e.geolocationEnabled,m=e.getSearchedCityWeather,p=e.searchedCityInfo;return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"wrapper"},o.a.createElement("header",{className:"header"},o.a.createElement("button",{className:"header__home-button",onClick:t},"Home"),o.a.createElement(v,{closeDetailedInfo:n,getSearchedCityWeather:m})),c?o.a.createElement(o.a.Fragment,null,o.a.createElement("button",{className:"detailed-info__button",onClick:n},"\u2190"),o.a.createElement(o.a.Suspense,{fallback:o.a.createElement("div",null,"Loading..")},o.a.createElement(E,{city:s}))):o.a.createElement("main",{className:"main-content-wrapper"},"granted"===h?o.a.createElement("div",null,u?o.a.createElement(w,{showComponent:a}):null,o.a.createElement("div",{className:"main-content__show-info-button",onClick:d},u?"Hide":"Show"," weather in your location")):null,o.a.createElement("div",{className:"main-content"},null!==p?0!==p.length?o.a.createElement(o.a.Suspense,{fallback:o.a.createElement("div",null)},o.a.createElement(b,{changeButtonColor:r,key:p.id,cityInfo:p,handleLike:i,showComponent:a})):l.map((function(e){return o.a.createElement(o.a.Suspense,{fallback:o.a.createElement("div",null)},o.a.createElement(b,{changeButtonColor:r,key:e.id,cityInfo:e,handleLike:i,showComponent:a}))})):o.a.createElement("h1",null,"No such city or misspelled name")))))},k=function(e){function t(){var e,n;Object(d.a)(this,t);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(n=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(o)))).state={data:[],searchedCityInfo:[],searchedCity:"",showPage:"",showUserLocationWindow:!0,geolocationEnabled:!1,showComponent:!1},n.handleLike=function(e){var t=Object(u.a)(n.state.data),a=n.state.data.find((function(t){return t.id===e})),o=t.indexOf(a);void 0!==a?t.splice(o,1):t.push(n.state.searchedCityInfo),n.setState({data:t}),localStorage.setItem("Cities",JSON.stringify(t))},n.changeButtonColor=function(e){return void 0!==n.state.data.find((function(t){return t.id===e}))},n.getWeatherInfo=function(e){if(!e)return null;var t=e.map((function(e){return e.id})).join(",");return g.a.get("https://api.openweathermap.org/data/2.5/group?id=".concat(t,"&units=metric&APPID=97ea200bf11177ab3c207304b3be2608"))},n.getSearchedCityWeather=function(e){n.setState({searchedCityInfo:e})},n._onButtonClick=function(e){var t=!n.state.showComponent;n.setState({showComponent:t}),n.setState({showPage:e})},n.closeDetailedInfo=function(){n.setState({showComponent:!1},n.setState({showPage:""}))},n.onMainBtnClick=function(){n.closeDetailedInfo(),n.setState({searchedCityInfo:[]})},n.onCloseUserLocationWindow=function(){n.setState({showUserLocationWindow:!n.state.showUserLocationWindow})},n}return Object(f.a)(t,e),Object(h.a)(t,[{key:"getCitiesFromLS",value:function(){return localStorage.getItem("Cities")?JSON.parse(localStorage.getItem("Cities")):[{id:"7532072"},{id:"7533415"},{id:"6695624"},{id:"7530738"},{id:"773357"},{id:"7530729"},{id:"7531906"},{id:"3081046"},{id:"7530984"},{id:"7531734"}]}},{key:"componentDidMount",value:function(){var e=Object(l.a)(s.a.mark((function e(){var t,n,a=this;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.getCitiesFromLS(),e.next=3,this.getWeatherInfo(t);case 3:n=e.sent,this.setState({data:n.data.list,cities:t}),navigator.permissions.query({name:"geolocation"}).then((function(e){a.setState({geolocationEnabled:e.state})}));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement(y.a,null),o.a.createElement(C,Object.assign({},this,this.props,this.state)))}}]),t}(a.Component);var _=function(){return o.a.createElement(k,null)},S=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function x(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}i.a.render(o.a.createElement(_,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/openweathermap-api",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/openweathermap-api","/service-worker.js");S?(!function(e,t){fetch(e).then((function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):x(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):x(t,e)}))}}()},8:function(e,t,n){"use strict";var a=n(11),o=n.n(a),r=n(15);o.a.interceptors.response.use(null,(function(e){return e.response&&e.response.status>=400&&e.response.status<500||(console.log("Logging the error",e),r.b.error("An unexpected error occurred")),Promise.reject(e)})),t.a={get:o.a.get,post:o.a.post,put:o.a.put,delete:o.a.delete}}},[[28,1,2]]]);
//# sourceMappingURL=main.e3c4689f.chunk.js.map